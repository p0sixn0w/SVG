(function(){function g(){l.setLazyLoad();e(d.section).target.forEach(function(a){b.instances.has(a)?b.instances.get(a).reInit():new b(a)})}var e=window.sg.common.$q,f=window.sg.common.utils,h=window.sg.common.video,l=window.sg.common.lazyLoad,k=window.sg.common.constants.BREAKPOINTS,d={section:".st-feature-benefit-full-bleed",btn:".st-feature-benefit-full-bleed__cta .js-video-play",pop:".st-feature-benefit-full-bleed__video",video:"div.video",close:".st-feature-benefit-full-bleed__close",videoLayer:".st-feature-benefit-full-bleed__video-layer",
layerTypeVideo:"st-feature-benefit-full-bleed--video-layer",ctaButton:".cta[data-target-popup-id]"},b=function(a){var c=this;this.ele={section:e(a),btn:null,pop:null,ctaButton:null,loopFirst:null,loopEnd:null};this.setProperty();this.isPc=null;this.handler={clickCtaButton:function(a){var b=e(null);if("string"===typeof a.target.dataset.targetPopupId){var c=a.target.dataset.targetPopupId.trim().replace("#","");""!==c&&(b=e("#"+c))}b.hasClass("pr-g-j2a-converter")?window.sg.components.prGj2aCover.openPopup(b.target[0],
a.currentTarget):b.css({display:"block",overflow:"hidden"})},resize:function(){var a=k.MOBILE<f.getViewPort().width;a!==c.isPc&&(a?(null!==c.ele.loopFirst&&c.ele.loopFirst.target[0]===c.ele.section.find(".popup-video__looping--first").target[0]&&(c.ele.loopFirst.remove(),c.ele.loopEnd.remove(),c.ele.loopFirst=null,c.ele.loopEnd=null,c.ele.pop.attr("tabindex","")),f.visibleScroll()):f.hiddenScroll(),c.isPc=null)}};b.instances.set(a,this);this.init()};b.prototype.setProperty=function(){this.ele.btn=
this.ele.section.find(d.btn);this.ele.pop=this.ele.section.find(d.pop);this.ele.video=this.ele.pop.find(d.video).target[0];this.ele.close=this.ele.pop.find(d.close);this.ele.ctaButton=this.ele.section.find(d.ctaButton);this.ele.videoLayer=this.ele.section.find(d.videoLayer);this.contentVideo=this.ele.section.find(".st-feature-benefit-full-bleed__figure").hasClass("s-video-bg")};b.prototype.openPopup=function(){this.ele.pop.css({display:"block"});h.init(this.ele.video);this.contentVideo&&this.ele.section.find(d.video).find(".video-player").target[0].pause();
var a=this.ele.section.hasClass(d.layerTypeVideo);!a&&k.MOBILE<f.getViewPort().width||(this.ele.videoLayer.prepend('\x3cbutton class\x3d"popup-video__looping--first"\x3e\x3c/button\x3e'),this.ele.close.after('\x3cbutton class\x3d"popup-video__looping--end"\x3e\x3c/button\x3e'),this.loopFocus(),this.ele.pop.attr("tabindex",0),this.ele.close.focus());!0!==a?(this.isPc=null,e(window).off("resize",this.handler.resize).on("resize",this.handler.resize),this.handler.resize()):f.hiddenScroll()};b.prototype.closePopup=
function(){this.ele.pop.css({display:"none"});h.dispose(this.ele.video);this.contentVideo&&this.ele.section.find(d.video).find(".video-player").target[0].play();this.ele.loopFirst&&(this.ele.loopFirst.remove(),this.ele.loopEnd.remove(),this.ele.loopFirst=this.ele.section.find(".popup-video__looping--first"),this.ele.loopEnd=this.ele.section.find(".popup-video__looping--end"));this.ele.pop.attr("tabindex","");f.visibleScroll();e(window).off("resize",this.handler.resize);this.ele.btn.focus()};b.prototype.loopFocus=
function(){var a=this;this.ele.loopFirst=this.ele.section.find(".popup-video__looping--first");this.ele.loopEnd=this.ele.section.find(".popup-video__looping--end");this.ele.section.find(".popup-video__looping--first").off("focus").on("focus",function(){a.ele.close.focus()});this.ele.section.find(".popup-video__looping--end").off("focus").on("focus",function(){a.ele.pop.focus()})};b.prototype.init=function(){this.bindEvents()};b.prototype.reInit=function(){this.setProperty();this.bindEvents()};b.prototype.bindEvents=
function(){var a=this;this.ele.btn.off("click").on("click",function(){a.openPopup()});this.ele.close.off("click").on("click",function(){a.closePopup()});this.ele.ctaButton.target.forEach(function(b){e(b).off("click",a.handler.clickCtaButton).on("click",a.handler.clickCtaButton)})};b.instances=new WeakMap;window.sg.components.featureBenefitFullBleed={init:g,reInit:g};e.ready(g);e.load(g)})();